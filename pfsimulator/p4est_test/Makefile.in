PARFLOW	      =	@top_srcdir@
SRCDIR	      =	@srcdir@
SUBDIR        = p4est_test
VPATH         = @srcdir@
OBJECT        = ..

default: all

include $(OBJECT)/config/Makefile.config

FILES = \
        test_grid.c

OUT = $(FILES:.c=) 	 

OBJS = \
        test_grid.o

ifeq ($(PARFLOW_HAVE_P4EST), yes)
OBJS += parflow_p4est_math.o \
parflow_p4est.o parflow_p4est_2d.o  parflow_p4est_3d.o
endif

$(PARFLOW_LIB_DIR)/$(PARFLOW_LIB): $(OBJS)
	@AR@ rus $(PARFLOW_LIB_DIR)/$(PARFLOW_LIB) $(OBJS)
        
all: $(PARFLOW_LIB_DIR)/$(PARFLOW_LIB)
        
build: $(OBJS)
	$(CC) $(CPPFLAGS) $(CFLAGS) $(LDFLAGS) \
	-o $(OUT) $(OBJS) $(PARFLOW_LIBS) $(LDLIBS)
	
clean: 
	$(PARFLOW_CLEAN) 
	@$(RM) $(OUT)

veryclean: clean
	@$(RM) Makefile
